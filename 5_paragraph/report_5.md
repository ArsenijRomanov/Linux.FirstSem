# Отчёт №5

## Цель работы
- Закрепить работу с правами доступа файлов и директорий в Linux.
- Научиться создавать и обновлять символьные ссылки.
- Получить список точек монтирования и оформить вывод по колонкам.
- Реализовать обмен сообщениями через именованный канал (FIFO).

## Среда выполнения
- ОС: Ubuntu
- Используемые команды/утилиты: `find`, `chmod`, `ln`, `cat`, `column`, `mkfifo`, `date`

---

## Ход работы

## 1) Стандартные права доступа для файлов и директорий

### Решение
```bash
find . -type f -exec chmod 644 {} \;
find . -type d -exec chmod 755 {} \;
```

### Пояснение
- `find . -type f ... chmod 644` — выставляет стандартные права для обычных файлов: `rw-r--r--`.
- `find . -type d ... chmod 755` — выставляет стандартные права для директорий: `rwxr-xr-x` 

---

## 2) Символьные ссылки

### Решение
```bash
mkdir -p dir
ln -sfn dir my-dir
```

### Пояснение
- `mkdir -p dir` — создаёт директорию (повторный запуск не вызывает ошибку).
- `ln -sfn dir my-dir` — создаёт/обновляет символьную ссылку `my-dir` на `dir`:
  - `-s` — символьная ссылка,
  - `-f` — перезаписать существующую ссылку,
  - `-n` — не разыменовывать ссылку на директорию при перезаписи.

---

## 3) Точки монтирования

### Решение
```bash
cat /proc/mounts | column -t
```

### Пояснение
- `/proc/mounts` содержит список смонтированных файловых систем.
- `column -t` выравнивает вывод по колонкам, делая его читаемым.

---

## 4) Именованные каналы (FIFO)

### Решение (чтение из канала и вывод вместе с датой)
```bash
#!/bin/bash

if [ ! -p my-pipe ]; then
	echo "my-pipe does not exist"
	exit 1
fi

while true; do
	if read message <my-pipe; then
		echo "$(date) - $message"
	fi
done
```

### Решение (пример отправки сообщений в канал)
```bash
#!/bin/bash

echo "Hello, world!" >my-pipe
sleep 1
echo "This is a test message." >my-pipe
sleep 1
echo "Another message!" >my-pipe
```

### Демонстрация работы
1. В первом терминале создать канал и запустить «читателя»:
   ```bash
   mkfifo my-pipe
   ./channels_reader.sh
   ```
2. Во втором терминале отправить сообщения:
   ```bash
   ./channels_writer.sh
   ```
3. В первом терминале появятся строки вида:
   - `<текущая дата> - Hello, world!`
   - `<текущая дата> - This is a test message.`
   - `<текущая дата> - Another message!`

---

## Вывод
Были применены команды `find` и `chmod` для массового выставления стандартных прав, создана обновляемая символьная ссылка через `ln -sfn`, оформлен вывод точек монтирования с помощью `column -t`, а также реализован обмен сообщениями через именованный канал (FIFO) с выводом сообщений вместе с текущей датой.
